<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [99s-extend] PUT on new resource and status 201
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:extend%40lists.ninenines.eu?Subject=Re%3A%20%5B99s-extend%5D%20PUT%20on%20new%20resource%20and%20status%20201&In-Reply-To=%3CF354B66E-52D3-427F-99F1-FEE86B9F3AEF%40tuli.pe%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000470.html">
   <LINK REL="Next"  HREF="000472.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[99s-extend] PUT on new resource and status 201</H1>
    <B>Camille Troillard</B> 
    <A HREF="mailto:extend%40lists.ninenines.eu?Subject=Re%3A%20%5B99s-extend%5D%20PUT%20on%20new%20resource%20and%20status%20201&In-Reply-To=%3CF354B66E-52D3-427F-99F1-FEE86B9F3AEF%40tuli.pe%3E"
       TITLE="[99s-extend] PUT on new resource and status 201">lists at tuli.pe
       </A><BR>
    <I>Tue Oct 14 10:42:54 CEST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000470.html">[99s-extend] PUT on new resource and status 201
</A></li>
        <LI>Next message: <A HREF="000472.html">[99s-extend] PUT on new resource and status 201
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#471">[ date ]</a>
              <a href="thread.html#471">[ thread ]</a>
              <a href="subject.html#471">[ subject ]</a>
              <a href="author.html#471">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Stefan,


On 14 Oct 2014, at 10:05, Stefan Strigler &lt;<A HREF="https://lists.ninenines.eu/listinfo/extend">stefan.strigler at gmail.com</A>&gt; wrote:

&gt;<i> just subscribed yesterday and now that's already my first question.
</I>&gt;<i> 
</I>&gt;<i> I'm referring to <A HREF="http://ninenines.eu/docs/en/cowboy/1.0/guide/rest_flowcharts/.">http://ninenines.eu/docs/en/cowboy/1.0/guide/rest_flowcharts/.</A> Given you have a PUT on a new resource the diagram suggests that the response's status code depends on whether you've set a location and/or body.
</I>
This is correct, I have experience this behaviour on Cowboy 1.0.0 and 2.0.0-pre.1.


&gt;<i> But when looking at the code (v1.0.0) then cowboy_rest:maybe_created/2 would always return a 201. No matter what. I think the code is right, but the diagram needs to be fixed. 
</I>
Could you be more specific?
I&#8217;m afraid it is not how it works for me.


&gt;<i> But then I'm not totally sure how to interpret <A HREF="http://tools.ietf.org/html/rfc2616#section-10.2.2">http://tools.ietf.org/html/rfc2616#section-10.2.2</A> which states
</I>&gt;<i> 
</I>&gt;<i>    The newly created resource can be referenced by the URI(s)
</I>&gt;<i>    returned in the entity of the response, with the most specific URI
</I>&gt;<i>    for the resource given by a Location header field.
</I>&gt;<i> 
</I>&gt;<i> Because currently it is totally possible to not have a location header set (just as no body) for the response. In my opinion the current code behaves good enough and it's up to the service to ensure the requirements as stated by the RFC. Should cowboy enforce a header field? Should it try to figure that out on its own?
</I>
I think how Cowboy does is best at the moment.
I like to have the freedom to specify myself the Location, especially when PUT-ting new resources.


A bit off topic, I think this article is interesting regarding RFC-2616.

	<A HREF="https://www.mnot.net/blog/2014/06/07/rfc2616_is_dead">https://www.mnot.net/blog/2014/06/07/rfc2616_is_dead</A>

Given that, you might want to have a look at RFC-7231, section 3.1.4.2:

	<A HREF="http://tools.ietf.org/html/rfc7231#section-3.1.4.2.">http://tools.ietf.org/html/rfc7231#section-3.1.4.2.</A>


Camille

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ninenines.eu/archives/extend/attachments/20141014/77f74bf0/attachment-0001.html">http://lists.ninenines.eu/archives/extend/attachments/20141014/77f74bf0/attachment-0001.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000470.html">[99s-extend] PUT on new resource and status 201
</A></li>
	<LI>Next message: <A HREF="000472.html">[99s-extend] PUT on new resource and status 201
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#471">[ date ]</a>
              <a href="thread.html#471">[ thread ]</a>
              <a href="subject.html#471">[ subject ]</a>
              <a href="author.html#471">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.ninenines.eu/listinfo/extend">More information about the Extend
mailing list</a><br>
</body></html>
