<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [99s-extend] PUT on new resource and status 201
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:extend%40lists.ninenines.eu?Subject=Re%3A%20%5B99s-extend%5D%20PUT%20on%20new%20resource%20and%20status%20201&In-Reply-To=%3C543CFD10.1050701%40ninenines.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000471.html">
   <LINK REL="Next"  HREF="000473.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[99s-extend] PUT on new resource and status 201</H1>
    <B>Lo&#239;c Hoguin</B> 
    <A HREF="mailto:extend%40lists.ninenines.eu?Subject=Re%3A%20%5B99s-extend%5D%20PUT%20on%20new%20resource%20and%20status%20201&In-Reply-To=%3C543CFD10.1050701%40ninenines.eu%3E"
       TITLE="[99s-extend] PUT on new resource and status 201">essen at ninenines.eu
       </A><BR>
    <I>Tue Oct 14 12:38:08 CEST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000471.html">[99s-extend] PUT on new resource and status 201
</A></li>
        <LI>Next message: <A HREF="000473.html">[99s-extend] Cowboy, IE9, and HTTPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#472">[ date ]</a>
              <a href="thread.html#472">[ thread ]</a>
              <a href="subject.html#472">[ subject ]</a>
              <a href="author.html#472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

On 10/14/2014 10:05 AM, Stefan Strigler wrote:
&gt;<i> I'm referring to
</I>&gt;<i> <A HREF="http://ninenines.eu/docs/en/cowboy/1.0/guide/rest_flowcharts/.">http://ninenines.eu/docs/en/cowboy/1.0/guide/rest_flowcharts/.</A> Given you
</I>&gt;<i> have a PUT on a new resource the diagram suggests that the response's
</I>&gt;<i> status code depends on whether you've set a location and/or body. But
</I>&gt;<i> when looking at the code (v1.0.0) then cowboy_rest:maybe_created/2 would
</I>&gt;<i> always return a 201. No matter what. I think the code is right, but the
</I>&gt;<i> diagram needs to be fixed.
</I>
Yes it looks like you are on to something there. Please open a ticket 
and I will look later on. There's another change near that area that 
needs to be made with POST, I will look at both at the same time.

&gt;<i> But then I'm not totally sure how to interpret
</I>&gt;<i> <A HREF="http://tools.ietf.org/html/rfc2616#section-10.2.2">http://tools.ietf.org/html/rfc2616#section-10.2.2</A> which states
</I>&gt;<i>
</I>&gt;<i>     The newly created resource can be referenced by the URI(s)
</I>&gt;<i>     returned in the entity of the response, with the most specific URI
</I>&gt;<i>     for the resource given by a Location header field.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Because currently it is totally possible to not have a location header set (just as no body) for the response. In my opinion the current code behaves good enough and it's up to the service to ensure the requirements as stated by the RFC. Should cowboy enforce a header field? Should it try to figure that out on its own?
</I>
201 does not require a location header if the resource is created at the 
path indicated by the request. Specifying a different URI is a rare 
occurrence with PUT, it should only occur if you create the resource on 
a different domain name (think a CDN pushing the file to a subdomain).

And as Camille stated, forget RFC 2616, the various RFCs from httpbis is 
where it's at now.

-- 
Lo&#239;c Hoguin
<A HREF="http://ninenines.eu">http://ninenines.eu</A>
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000471.html">[99s-extend] PUT on new resource and status 201
</A></li>
	<LI>Next message: <A HREF="000473.html">[99s-extend] Cowboy, IE9, and HTTPS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#472">[ date ]</a>
              <a href="thread.html#472">[ thread ]</a>
              <a href="subject.html#472">[ subject ]</a>
              <a href="author.html#472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.ninenines.eu/listinfo/extend">More information about the Extend
mailing list</a><br>
</body></html>
