<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [99s-extend] Cowboy Middleware and websockets
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:extend%40lists.ninenines.eu?Subject=Re%3A%20%5B99s-extend%5D%20Cowboy%20Middleware%20and%20websockets&In-Reply-To=%3C519A2461.1000305%40ninenines.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000146.html">
   <LINK REL="Next"  HREF="000148.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[99s-extend] Cowboy Middleware and websockets</H1>
    <B>Lo&#239;c Hoguin</B> 
    <A HREF="mailto:extend%40lists.ninenines.eu?Subject=Re%3A%20%5B99s-extend%5D%20Cowboy%20Middleware%20and%20websockets&In-Reply-To=%3C519A2461.1000305%40ninenines.eu%3E"
       TITLE="[99s-extend] Cowboy Middleware and websockets">essen at ninenines.eu
       </A><BR>
    <I>Mon May 20 15:25:53 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000146.html">[99s-extend] Cowboy Middleware and websockets
</A></li>
        <LI>Next message: <A HREF="000148.html">[99s-extend] Cowboy Middleware and websockets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#147">[ date ]</a>
              <a href="thread.html#147">[ thread ]</a>
              <a href="subject.html#147">[ subject ]</a>
              <a href="author.html#147">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 05/20/2013 01:53 PM, Eduardo Gurgel wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On Sun, May 19, 2013 at 10:01 PM, Eduardo Gurgel &lt;<A HREF="https://lists.ninenines.eu/listinfo/extend">edgurgel at gmail.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.ninenines.eu/listinfo/extend">edgurgel at gmail.com</A>&gt;&gt; wrote:
</I>&gt;<i>
</I>&gt;<i>     I want to write a cowboy middleware that works only on non-websocket
</I>&gt;<i>     requests. How can I achieve this? Is there any way that I ask the
</I>&gt;<i>     Request if this is a websocket request?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Thinking about my question, I see that the middleware (if it's behind
</I>&gt;<i> the cowboy_handler) can't figure if the connection will be upgraded or not.
</I>&gt;<i>
</I>&gt;<i> Still, it would be cool if I could select which routes will be applied
</I>&gt;<i> to my middleware.
</I>
You have the Req which can help you do things based on host or path, and 
you also have the environment, which contains the name of the handler 
that's gonna be used if you execute your middleware after cowboy_router.

-- 
Lo&#239;c Hoguin
Erlang Cowboy
Nine Nines
<A HREF="http://ninenines.eu">http://ninenines.eu</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000146.html">[99s-extend] Cowboy Middleware and websockets
</A></li>
	<LI>Next message: <A HREF="000148.html">[99s-extend] Cowboy Middleware and websockets
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#147">[ date ]</a>
              <a href="thread.html#147">[ thread ]</a>
              <a href="subject.html#147">[ subject ]</a>
              <a href="author.html#147">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.ninenines.eu/listinfo/extend">More information about the Extend
mailing list</a><br>
</body></html>
