<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [99s-extend] timeouts and slow clients in cowboy loop handler
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:extend%40lists.ninenines.eu?Subject=Re%3A%20%5B99s-extend%5D%20timeouts%20and%20slow%20clients%20in%20cowboy%20loop%20handler&In-Reply-To=%3C523C9911.8070908%40ninenines.eu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000237.html">
   <LINK REL="Next"  HREF="000239.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[99s-extend] timeouts and slow clients in cowboy loop handler</H1>
    <B>Lo&#239;c Hoguin</B> 
    <A HREF="mailto:extend%40lists.ninenines.eu?Subject=Re%3A%20%5B99s-extend%5D%20timeouts%20and%20slow%20clients%20in%20cowboy%20loop%20handler&In-Reply-To=%3C523C9911.8070908%40ninenines.eu%3E"
       TITLE="[99s-extend] timeouts and slow clients in cowboy loop handler">essen at ninenines.eu
       </A><BR>
    <I>Fri Sep 20 20:50:57 CEST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="000237.html">[99s-extend] timeouts and slow clients in cowboy loop handler
</A></li>
        <LI>Next message: <A HREF="000239.html">[99s-extend] timeouts and slow clients in cowboy loop handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#238">[ date ]</a>
              <a href="thread.html#238">[ thread ]</a>
              <a href="subject.html#238">[ subject ]</a>
              <a href="author.html#238">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Loop handlers close after a while regardless of what you send, it only 
checks what the client sends. The best way for you would be to disable 
that timeout and handle it manually.

As for the second question, I'm still reading the thread on 
erlang-questions but I've seen some good ideas about timestamps so far.

On 09/20/2013 08:47 PM, akonsu wrote:
&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I am using loop handler and I stream from it:
</I>&gt;<i>
</I>&gt;<i> info({stream, Part}, Req, S) -&gt;
</I>&gt;<i>      ok = cowboy_req:chunk(Part, Req),
</I>&gt;<i>      {loop, Req, S, hibernate};
</I>&gt;<i>
</I>&gt;<i> I have two questions:
</I>&gt;<i>
</I>&gt;<i> 1. on timeouts cowboy sends 204 No Content. In my case it is not the
</I>&gt;<i> right response because I may have already sent some data. Is there a way
</I>&gt;<i> to send a custom response?
</I>&gt;<i>
</I>&gt;<i> 2. how to check if the client is too slow and is not reading the
</I>&gt;<i> response stream fast enough? If this happens, then I need to disconnect.
</I>&gt;<i>
</I>&gt;<i> I can live without 1. but I need to figure out 2. Please help.
</I>&gt;<i>
</I>&gt;<i> thank you!
</I>&gt;<i> Konstantin
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Extend mailing list
</I>&gt;<i> <A HREF="https://lists.ninenines.eu/listinfo/extend">Extend at lists.ninenines.eu</A>
</I>&gt;<i> <A HREF="http://lists.ninenines.eu:81/listinfo/extend">http://lists.ninenines.eu:81/listinfo/extend</A>
</I>&gt;<i>
</I>

-- 
Lo&#239;c Hoguin
Erlang Cowboy
Nine Nines
<A HREF="http://ninenines.eu">http://ninenines.eu</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000237.html">[99s-extend] timeouts and slow clients in cowboy loop handler
</A></li>
	<LI>Next message: <A HREF="000239.html">[99s-extend] timeouts and slow clients in cowboy loop handler
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#238">[ date ]</a>
              <a href="thread.html#238">[ thread ]</a>
              <a href="subject.html#238">[ subject ]</a>
              <a href="author.html#238">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.ninenines.eu/listinfo/extend">More information about the Extend
mailing list</a><br>
</body></html>
