<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [99s-extend] cowboy client cert auth, basic auth
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:extend%40lists.ninenines.eu?Subject=Re%3A%20%5B99s-extend%5D%20cowboy%20client%20cert%20auth%2C%20basic%20auth&In-Reply-To=%3CCAJCf5RyYUNPmVcLEV%2BVyKpA24x0Pjb15%2B7doeugeQ%3DZEJSpc6w%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000393.html">
   <LINK REL="Next"  HREF="000396.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[99s-extend] cowboy client cert auth, basic auth</H1>
    <B>Daniel Goertzen</B> 
    <A HREF="mailto:extend%40lists.ninenines.eu?Subject=Re%3A%20%5B99s-extend%5D%20cowboy%20client%20cert%20auth%2C%20basic%20auth&In-Reply-To=%3CCAJCf5RyYUNPmVcLEV%2BVyKpA24x0Pjb15%2B7doeugeQ%3DZEJSpc6w%40mail.gmail.com%3E"
       TITLE="[99s-extend] cowboy client cert auth, basic auth">daniel.goertzen at gmail.com
       </A><BR>
    <I>Thu Jun  5 01:44:02 CEST 2014</I>
    <P><UL>
        <LI>Previous message: <A HREF="000393.html">[99s-extend] cowboy client cert auth, basic auth
</A></li>
        <LI>Next message: <A HREF="000396.html">[99s-extend] cowboy client cert auth, basic auth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#394">[ date ]</a>
              <a href="thread.html#394">[ thread ]</a>
              <a href="subject.html#394">[ subject ]</a>
              <a href="author.html#394">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, Jun 4, 2014 at 4:48 PM, Lo&#239;c Hoguin &lt;<A HREF="https://lists.ninenines.eu/listinfo/extend">essen at ninenines.eu</A>&gt; wrote:

&gt;<i> On 06/04/2014 10:08 PM, Daniel Goertzen wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I am having very good luck with Cowboy so far, but I have some questions:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> 1. There doesn't appear to be any way to do client certificate
</I>&gt;&gt;<i> authorization in Cowboy, although I see there is an example for doing
</I>&gt;&gt;<i> exactly that with Ranch.  I think I could modify Cowboy to do what I
</I>&gt;&gt;<i> want, but I thought I would ask if there were other options before doing
</I>&gt;&gt;<i> that.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Same as Ranch really, you just gotta take the socket and then call the ssl
</I>&gt;<i> functions.
</I>&gt;<i>
</I>&gt;<i>
</I>Yes, but in cowboy there's no API to get at the socket.

I was thinking of adding a &quot;onconnect&quot; hook similar to how there are
&quot;onrequest&quot; and &quot;onresponse&quot; hooks.  The hook would be called in
cowboy_protocol:init(), would accept Transport and Socket, and return a
&quot;user connection state&quot; term that gets stashed in the state record.  The
user connection state would then be provided in the Req object to each
handler.  With these features one could do whatever computation they want
on the socket and provide the result to all subsequent requests on that
socket.  I want to use it for client cert checking, but it could be used
for other things such as an IP address security check.

Dan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.ninenines.eu/archives/extend/attachments/20140604/2bce99e1/attachment.html">http://lists.ninenines.eu/archives/extend/attachments/20140604/2bce99e1/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000393.html">[99s-extend] cowboy client cert auth, basic auth
</A></li>
	<LI>Next message: <A HREF="000396.html">[99s-extend] cowboy client cert auth, basic auth
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#394">[ date ]</a>
              <a href="thread.html#394">[ thread ]</a>
              <a href="subject.html#394">[ subject ]</a>
              <a href="author.html#394">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.ninenines.eu/listinfo/extend">More information about the Extend
mailing list</a><br>
</body></html>
